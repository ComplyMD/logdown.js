(function(){function e(t,r){return this instanceof e?e._isPrefixAlreadyInUse(t)?e._getInstanceByPrefix(t):(this.opts=e._normalizeOpts(t,r),this.state=e._getInitialState(this.opts),e._instances.push(this),this):new e(t,r)}function t(e){return new S.RegExp("^"+e.replace(/\*/g,".*?")+"$")}function r(t){return e._instances.some(function(e){return e.opts.prefix===t})}function n(t){return e._instances.filter(function(e){return e.opts.prefix===t})[0]}function o(t,r){if("string"!=typeof t)throw new S.TypeError("prefix must be a string");r=r||{};var n=void 0===r.markdown||S.Boolean(r.markdown);return{prefix:t,prefixColor:r.prefixColor||e._getNextPrefixColor(),markdown:n}}function i(t){return{isEnabled:e._getEnableState(t)}}function s(t){var r=!1;return e._prefixRegExps.forEach(function(e){"enable"===e.type&&e.regExp.test(t.prefix)?r=!0:"disable"===e.type&&e.regExp.test(t.prefix)&&(r=!1)}),r}function a(){try{I.localStorage&&"string"==typeof I.localStorage.getItem("debug")&&(e._prefixRegExps=[],I.localStorage.getItem("debug").split(",").forEach(function(t){t=t.trim();var r="enable";"-"===t[0]&&(t=t.substr(1),r="disable");var n=e._prepareRegExpForPrefixSearch(t);e._prefixRegExps.push({type:r,regExp:n})}))}catch(e){}}function p(){return P[0]||(P[0]={lastUsed:0}),P[0].lastUsed+=1,e.prefixColors[P[0].lastUsed%e.prefixColors.length]}function c(e){return S.Array.prototype.slice.call(e,0)}function l(){if(this.state.isEnabled){var e=c(arguments),t=this._prepareOutput(e,"debug");(S.console.debug||S.console.log).apply(S.console,t)}}function u(){if(this.state.isEnabled){var e=c(arguments),t=this._prepareOutput(e,"log");(S.console.log||S.console.log).apply(S.console,t)}}function f(){if(this.state.isEnabled){var e=c(arguments),t=this._prepareOutput(e,"info");(S.console.info||S.console.log).apply(S.console,t)}}function g(){if(this.state.isEnabled){var e=c(arguments),t=this._prepareOutput(e,"warn");(S.console.warn||S.console.log).apply(S.console,t)}}function x(){if(this.state.isEnabled){var e=c(arguments),t=this._prepareOutput(e,"error");(S.console.error||S.console.log).apply(S.console,t)}}function h(){try{return"WebkitAppearance"in S.document.documentElement.style}catch(e){return!1}}function d(){try{return navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)}catch(e){return!1}}function _(){return h()||d()}function y(){var e=[];return _()?(e.push("%c"+this.opts.prefix+"%c "),e.push("color:"+this.opts.prefixColor+"; font-weight:bold;","")):e.push("["+this.opts.prefix+"] "),e}function b(e,t){var r=[];return t.forEach(function(t){var n=e.match(t.regexp);n&&r.push({rule:t,match:n})}),0===r.length?null:(r.sort(function(e,t){return e.match.index-t.match.index}),r[0])}function C(e,t){return"%c"+t+"%c"}function E(e,t){return"%c"+t+"%c"}function m(e,t){return"%c"+t+"%c"}function v(e){for(var t=[],r=b(e,O);r;)t.push(r.rule.style),t.push(""),e=e.replace(r.rule.regexp,r.rule.replacer),r=b(e,O);return{text:e,styles:t}}function w(e){var t,r=this._getDecoratedPrefix();return"string"==typeof e[0]?this.opts.markdown&&_()?(t=R.parse(e[0]),r[0]=r[0]+t.text,r=r.concat(t.styles)):r[0]=r[0]+e[0]:r.push(e[0]),e.length>1&&(r=r.concat(e.slice(1))),r}var P=Array(1),S=this,F=e.prototype;e._instances=[],e._prefixRegExps=[],e._prepareRegExpForPrefixSearch=t,e._isPrefixAlreadyInUse=r,e._getInstanceByPrefix=n,e._normalizeOpts=o,e._getInitialState=i,e._getEnableState=s,e.prefixColors=["#F2777A","#F99157","#FFCC66","#99CC99","#66CCCC","#6699CC","#CC99CC"];var I=this;e._setPrefixRegExps=a,e._getNextPrefixColor=p;var O=[{regexp:/\*([^*]+)\*/,replacer:C,style:"font-weight:bold;"},{regexp:/_([^_]+)_/,replacer:E,style:"font-style:italic;"},{regexp:/`([^`]+)`/,replacer:m,style:"background-color:rgba(255,204,102, 0.1);color:#FFCC66;padding:2px 5px;border-radius:2px;"}],R={parse:v};F._prepareOutput=w,F._getDecoratedPrefix=y,F.error=x,F.warn=g,F.info=f,F.log=u,F.debug=l,logdown=e}).call(this);
